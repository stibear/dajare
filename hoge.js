var table = [
    "http://webnaut.jp/direction/img/thumbnail_b_direction_131216.jpg", "http://webnaut.jp/direction/654.html", "direction", 1, 1,
    "http://webnaut.jp/direction/img/thumbnail_b_direction_131210.jpg", "http://webnaut.jp/direction/652.html", "direction", 1, 2,
    "http://webnaut.jp/direction/img/thumbnail_b_direction_131030.jpg", "http://webnaut.jp/direction/647.html", "direction", 1, 3,
    "http://webnaut.jp/direction/img/thumbnail_b_direction_131011.jpg", "http://webnaut.jp/direction/646.html", "direction", 1, 4,
    "http://webnaut.jp/direction/img/thumbnail_b_direction_130614.jpg", "http://webnaut.jp/direction/589.html", "direction", 1, 5,
    
    
    
    
    
    
    
    "http://webnaut.jp/direction/img/thumbnail_b_direction_130418.jpg", "http://webnaut.jp/direction/571.html", "direction", 1, 6,
    
    
    
    
    
    
    
    "http://webnaut.jp/direction/img/thumbnail_b_direction_130412.jpg", "http://webnaut.jp/direction/568.html", "direction", 1, 7,
    
    
    
    
    
    
    
    "http://webnaut.jp/direction/img/thumbnail_b_direction_130403.jpg", "http://webnaut.jp/direction/564.html", "direction", 1, 8,
    
    
    
    
    
    
    
    "http://webnaut.jp/direction/img/thumbnail_b_direction_130323.jpg", "http://webnaut.jp/direction/561.html", "direction", 1, 9,
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    
    
    
    
    "http://webnaut.jp/design/img/thumbnail_b_design_140312.gif", "http://webnaut.jp/design/667.html", "design", 2, 1,
    
    
    
    
    
    
    
    "http://webnaut.jp/design/img/thumbnail_b_design_131227.gif", "http://webnaut.jp/design/658.html", "design", 2, 2,
    
    
    
    
    
    
    
    "http://webnaut.jp/design/img/thumbnail_b_design_131128.jpg", "http://webnaut.jp/design/650.html", "design", 2, 3,
    
    
    
    
    
    
    
    "http://webnaut.jp/design/img/thumbnail_b_design_131017.jpg", "http://webnaut.jp/design/645.html", "design", 2, 4,
    
    
    
    
    
    
    
    "http://webnaut.jp/design/img/thumbnail_b_design_130930.jpg", "http://webnaut.jp/design/640.html", "design", 2, 5,
    
    
    
    
    
    
    
    "http://webnaut.jp/design/img/thumbnail_b_design_130821.jpg", "http://webnaut.jp/design/631.html", "design", 2, 6,
    
    
    
    
    
    
    
    "http://webnaut.jp/design/img/thumbnail_b_design_130812.jpg", "http://webnaut.jp/design/620.html", "design", 2, 7,
    
    
    
    
    
    
    
    "http://webnaut.jp/design/img/thumbnail_b_design_130626.gif", "http://webnaut.jp/design/598.html", "design", 2, 8,
    
    
    
    
    
    
    
    "http://webnaut.jp/design/img/thumbnail_b_design_130530.gif", "http://webnaut.jp/design/585.html", "design", 2, 9,
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    
    
    
    
    "http://webnaut.jp/markup/img/thumbnail_b_markup_140327.jpg", "http://webnaut.jp/markup/669.html", "markup", 3, 1,
    
    
    
    
    
    
    
    "http://webnaut.jp/markup/img/thumbnail_b_markup_140204-3.jpg", "http://webnaut.jp/markup/663.html", "markup", 3, 2,
    
    
    
    
    
    
    
    "http://webnaut.jp/markup/img/thumbnail_b_markup_131227.jpg", "http://webnaut.jp/markup/660.html", "markup", 3, 3,
    
    
    
    
    
    
    
    "http://webnaut.jp/markup/images/thumbnail_b_markup_131011.jpg", "http://webnaut.jp/markup/644.html", "markup", 3, 4,
    
    
    
    
    
    
    
    "http://webnaut.jp/markup/img/thumbnail_b_markup_130924.jpg", "http://webnaut.jp/markup/638.html", "markup", 3, 5,
    
    
    
    
    
    
    
    "http://webnaut.jp/markup/img/thumbnail_b_markup_130821.jpg", "http://webnaut.jp/markup/628.html", "markup", 3, 6,
    
    
    
    
    
    
    
    "http://webnaut.jp/markup/img/thumbnail_b_markup_130809.jpg", "http://webnaut.jp/markup/623.html", "markup", 3, 7,
    
    
    
    
    
    
    
    "http://webnaut.jp/markup/img/thumbnail_b_markup_130731.jpg", "http://webnaut.jp/markup/618.html", "markup", 3, 8,
    
    
    
    
    
    
    
    "http://webnaut.jp/markup/img/thumbnail_b_markup_130730.jpg", "http://webnaut.jp/markup/611.html", "markup", 3, 9,
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    
    
    
    
    "http://webnaut.jp/others/img/thumbnail_b_other_140303.jpg", "http://webnaut.jp/others/666.html", "others", 4, 1,
    
    
    
    
    
    
    
    
    
    
    
    
    "http://webnaut.jp/others/img/thumbnail_b_other_131119.jpg", "http://webnaut.jp/others/648.html", "others", 4, 2,
    
    
    
    
    
    
    
    "http://webnaut.jp/others/img/thumbnail_b_others_130906.jpg", "http://webnaut.jp/others/636.html", "others", 4, 3,
    
    
    
    
    
    
    
    "http://webnaut.jp/others/img/thumbnail_b_others_130816.jpg", "http://webnaut.jp/others/627.html", "others", 4, 4,
    
    
    
    
    
    
    
    "http://webnaut.jp/others/img/thumbnail_b_others_130808.jpg", "http://webnaut.jp/others/621.html", "others", 4, 5,
    
    
    
    
    
    
    
    "http://webnaut.jp/others/img/thumbnail_b_others_130725.jpg", "http://webnaut.jp/others/610.html", "others", 4, 6,
    
    
    
    
    
    
    
    "http://webnaut.jp/others/img/thumbnail_b_others_130703.jpg", "http://webnaut.jp/others/602.html", "others", 4, 7,
    
    
    
    
    
    
    
    "http://webnaut.jp/others/img/thumbnail_b_others_130625.jpg", "http://webnaut.jp/others/595.html", "others", 4, 8,
    
    
    
    
    
    
    
    "http://webnaut.jp/others/img/thumbnail_b_others_130619.jpg", "http://webnaut.jp/others/590.html", "others", 4, 9,
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    
    
    
    
    "http://webnaut.jp/develop/img/thumbnail_b_develop_140203.jpg", "http://webnaut.jp/develop/664.html", "develop", 5, 1,
    
    
    
    
    
    
    
    "http://webnaut.jp/develop/img/thumbnail_b_develop_130903.jpg", "http://webnaut.jp/develop/633.html", "develop", 5, 2,
    
    
    
    
    
    
    
    
    
    
    
    
    "http://webnaut.jp/markup/img/thumbnail_b_markup_121217_3.jpg", "http://webnaut.jp/develop/442.html", "develop", 5, 3,
    
    
    
];

var camera, scene, renderer;
var controls;
var objects = [];
var targets = { table: [], sphere: [], helix: [], grid: [] };
init();
animate();
function init() {
    camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 5000 );
    camera.position.z = 1800;
    scene = new THREE.Scene();

    // table ====================================

    for ( var i = 0; i < table.length; i += 5 ) {

	var element = document.createElement( 'a' );
	element.className = 'element ' + table[ i + 2];
	//symbol.className = table[ i + 2];
	element.setAttribute("href",table[ i + 1 ])
	element.style.backgroundColor = 'rgba(0,127,127,' + ( Math.random() * 0.5 + 0.25 ) + ')';



	var symbol = document.createElement( 'img' );
	symbol.src = table[ i ];
	//symbol.className = table[ i + 2];
	//symbol.textContent = '<img src="' + table[ i ] + '">';
	element.appendChild( symbol );



	var object = new THREE.CSS3DObject( element );
	object.position.x = Math.random() * 4000 - 2000;
	object.position.y = Math.random() * 4000 - 2000;
	object.position.z = Math.random() * 4000 - 2000;
	scene.add( object );

	objects.push( object );

	//

	var object = new THREE.Object3D();
	object.position.x = ( table[ i + 3 ] * 400 ) - 1240;
	object.position.y = - ( table[ i + 4 ] * 300 ) + 1300;

	targets.table.push( object );

    }

    // sphere ====================================

    var vector = new THREE.Vector3();

    for ( var i = 0, l = objects.length; i < l; i ++ ) {

	var phi = Math.acos( -1 + ( 2 * i ) / l );
	var theta = Math.sqrt( l * Math.PI ) * phi;

	var object = new THREE.Object3D();

	object.position.x = 1000 * Math.cos( theta ) * Math.sin( phi );
	object.position.y = 1000 * Math.sin( theta ) * Math.sin( phi );
	object.position.z = 1000 * Math.cos( phi );

	vector.copy( object.position ).multiplyScalar( 2 );

	object.lookAt( vector );

	targets.sphere.push( object );

    }

    // helix ====================================

    var vector = new THREE.Vector3();

    for ( var i = 0, l = objects.length; i < l; i ++ ) {

	var phi = i * 0.175 + Math.PI;

	var object = new THREE.Object3D();

	object.position.x = 1100 * Math.sin( phi );
	object.position.y = - ( i * 8 ) + 450;
	object.position.z = 1100 * Math.cos( phi );

	vector.x = object.position.x * 2;
	vector.y = object.position.y;
	vector.z = object.position.z * 2;

	object.lookAt( vector );

	targets.helix.push( object );

    }

    // grid ====================================

    for ( var i = 0; i < objects.length; i ++ ) {

	var object = new THREE.Object3D();

	object.position.x = ( ( i % 3 ) * 400 ) - 400;
	object.position.y = ( - ( Math.floor( i / 3 ) % 3 ) * 400 ) + 400;
	object.position.z = ( Math.floor( i / 9 ) ) * 1000 ;

	targets.grid.push( object );

    }

    //  ====================================

    renderer = new THREE.CSS3DRenderer();
    renderer.setSize( window.innerWidth, window.innerHeight );
    renderer.domElement.style.position = 'absolute';
    document.getElementById( 'container' ).appendChild( renderer.domElement );

    //

    controls = new THREE.TrackballControls( camera, renderer.domElement );
    controls.rotateSpeed = 0.5;
    controls.addEventListener( 'change', render );

    var button = document.getElementById( 'table' );
    button.addEventListener( 'click', function ( event ) {

	transform( targets.table, 2000 );

    }, false );

    var button = document.getElementById( 'sphere' );
    button.addEventListener( 'click', function ( event ) {

	transform( targets.sphere, 2000 );

    }, false );

    var button = document.getElementById( 'helix' );
    button.addEventListener( 'click', function ( event ) {

	transform( targets.helix, 2000 );

    }, false );

    var button = document.getElementById( 'grid' );
    button.addEventListener( 'click', function ( event ) {

	transform( targets.grid, 2000 );

    }, false );

    transform( targets.sphere, 2000 );

    //

    window.addEventListener( 'resize', onWindowResize, false );

}

function transform( targets, duration ) {

    TWEEN.removeAll();

    for ( var i = 0; i < objects.length; i ++ ) {

	var object = objects[ i ];
	var target = targets[ i ];

	new TWEEN.Tween( object.position )
	    .to( { x: target.position.x, y: target.position.y, z: target.position.z }, Math.random() * duration + duration )
	    .easing( TWEEN.Easing.Exponential.InOut )
	    .start();

	new TWEEN.Tween( object.rotation )
	    .to( { x: target.rotation.x, y: target.rotation.y, z: target.rotation.z }, Math.random() * duration + duration )
	    .easing( TWEEN.Easing.Exponential.InOut )
	    .start();

    }

    new TWEEN.Tween( this )
	.to( {}, duration * 2 )
	.onUpdate( render )
	.start();

}

function onWindowResize() {

    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();

    renderer.setSize( window.innerWidth, window.innerHeight );

}

function animate() {

    requestAnimationFrame( animate );

    TWEEN.update();
    controls.update();

}

function render() {

    renderer.render( scene, camera );

}

